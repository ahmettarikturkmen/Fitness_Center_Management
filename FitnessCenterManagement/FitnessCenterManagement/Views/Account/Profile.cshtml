@model FitnessCenterManagement.Models.UserProfileViewModel

@{
    Layout = null;
    ViewData["Title"] = "Profilim";
}

<!DOCTYPE html>
<html class="dark" lang="tr">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Profilim - Fitness Center</title>

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet" />

    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#13ec80",
                        "background-light": "#f6f8f7",
                        "background-dark": "#102219",
                        "card-dark": "#1c2721",
                        "border-dark": "#283930"
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                },
            },
        }
    </script>
    <style>
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #111814;
        }

        ::-webkit-scrollbar-thumb {
            background: #283930;
            border-radius: 4px;
        }

            ::-webkit-scrollbar-thumb:hover {
                background: #3b5447;
            }

        .material-symbols-outlined {
            font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        /* Inputlardaki takvim ikonunu beyaz yap */
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
            cursor: pointer;
        }
    </style>
</head>
<body class="relative flex h-auto min-h-screen w-full flex-col bg-[#111814] text-white font-display overflow-x-hidden">

    <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-border-dark px-4 md:px-10 py-4 bg-[#111814] sticky top-0 z-50">
        <a href="/Home/Index" class="flex items-center gap-3 text-white decoration-0">
            <div class="size-10 flex items-center justify-center text-primary">
                <span class="material-symbols-outlined" style="font-size: 36px;">fitness_center</span>
            </div>
            <h2 class="text-white text-xl font-bold leading-tight tracking-tight">Fitness Center</h2>
        </a>

        <div class="flex flex-1 justify-end gap-8 items-center">
            <div class="hidden md:flex items-center gap-6">
                <a class="text-[#9db9ab] hover:text-white text-sm font-medium transition-colors" href="/Home/Index">Ana Sayfa</a>
                <a class="text-[#9db9ab] hover:text-white text-sm font-medium transition-colors" href="/Appointment/Index">Randevularım</a>
                <a class="text-[#9db9ab] hover:text-white text-sm font-medium transition-colors" href="/AI/Index">AI Koç</a>
                <a class="text-primary text-sm font-medium transition-colors" href="#">Profilim</a>
            </div>

            <form asp-controller="Account" asp-action="Logout" method="post" class="flex items-center">
                <button type="submit" class="text-[#9db9ab] hover:text-red-400 text-sm font-medium transition-colors ml-4 flex items-center gap-1">
                    <span class="material-symbols-outlined text-sm">logout</span> Çıkış
                </button>
            </form>
        </div>
    </header>

    <div class="px-4 md:px-10 lg:px-40 flex flex-1 justify-center py-8 md:py-12">
        <div class="flex flex-col max-w-[1200px] flex-1">

            <div class="flex flex-wrap justify-between gap-3 p-4 mb-4">
                <div class="flex min-w-72 flex-col gap-2">
                    <p class="text-white text-4xl font-black leading-tight tracking-[-0.033em]">Profil Ayarları</p>
                    <p class="text-[#9db9ab] text-base font-normal">Kişisel bilgilerinizi ve hesap güvenliğinizi buradan yönetebilirsiniz.</p>
                </div>

                @if (TempData["Success"] != null)
                {
                    <div class="bg-green-500/10 border border-green-500 text-green-400 px-4 py-2 rounded-lg flex items-center gap-2">
                        <span class="material-symbols-outlined">check_circle</span>
                        @TempData["Success"]
                    </div>
                }
            </div>

            <div class="bg-card-dark/50 rounded-2xl border border-border-dark overflow-hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2">

                    <div class="p-6 md:p-10 flex flex-col gap-8 relative">

                        <div class="flex items-center gap-6">
                            <div class="relative group">
                                <div class="size-24 rounded-full bg-cover bg-center border-4 border-border-dark group-hover:border-primary transition-colors duration-300 flex items-center justify-center bg-[#283930]">
                                    <span class="material-symbols-outlined text-4xl text-[#9db9ab]">person</span>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-white text-xl font-bold">Kişisel Bilgiler</h3>
                                <p class="text-[#9db9ab] text-sm">Üyelik detaylarınız.</p>
                            </div>
                        </div>

                        <form asp-action="UpdateProfile" method="post" class="flex flex-col gap-5">

                            <label class="flex flex-col flex-1">
                                <p class="text-white text-sm font-medium pb-2">Ad Soyad</p>
                                <input asp-for="FullName" class="flex w-full rounded-lg text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-[#3b5447] bg-card-dark focus:border-primary h-12 px-4 transition-all placeholder:text-[#9db9ab]" />
                                <span asp-validation-for="FullName" class="text-red-400 text-xs mt-1"></span>
                            </label>

                            <label class="flex flex-col flex-1">
                                <p class="text-white text-sm font-medium pb-2">E-posta Adresi</p>
                                <div class="relative">
                                    <span class="absolute left-4 top-1/2 -translate-y-1/2 text-[#9db9ab]">
                                        <span class="material-symbols-outlined text-[20px]">mail</span>
                                    </span>
                                    <input asp-for="Email" class="flex w-full rounded-lg text-[#9db9ab] border border-border-dark bg-[#161f1a] h-12 pl-11 pr-4 cursor-not-allowed opacity-70" readonly />
                                </div>
                            </label>

                            <label class="flex flex-col flex-1">
                                <p class="text-white text-sm font-medium pb-2">Doğum Tarihi</p>
                                <div class="relative">
                                    <span class="absolute left-4 top-1/2 -translate-y-1/2 text-[#9db9ab]">
                                        <span class="material-symbols-outlined text-[20px]">calendar_month</span>
                                    </span>
                                    <input asp-for="BirthDate" type="date" class="flex w-full rounded-lg text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-[#3b5447] bg-card-dark focus:border-primary h-12 pl-11 pr-4 transition-all" />
                                </div>
                                <span asp-validation-for="BirthDate" class="text-red-400 text-xs mt-1"></span>
                            </label>

                            <div class="pt-4">
                                <button type="submit" class="flex w-full md:w-auto items-center justify-center rounded-lg h-12 px-6 bg-primary hover:bg-primary/90 transition-colors text-[#111814] text-base font-bold">
                                    <span class="material-symbols-outlined mr-2 text-[20px]">save</span>
                                    Bilgilerimi Güncelle
                                </button>
                            </div>
                        </form>
                    </div>

                    <div class="p-6 md:p-10 flex flex-col gap-8 bg-[#161f1a]/50 border-t lg:border-t-0 lg:border-l border-border-dark">

                        <div class="flex items-center gap-4 h-24">
                            <div class="size-12 rounded-full bg-[#283930] flex items-center justify-center text-primary">
                                <span class="material-symbols-outlined">lock_reset</span>
                            </div>
                            <div>
                                <h3 class="text-white text-xl font-bold">Şifre Değiştir</h3>
                                <p class="text-[#9db9ab] text-sm">Hesap güvenliği.</p>
                            </div>
                        </div>

                        <form asp-action="ChangePassword" method="post" class="flex flex-col gap-5 h-full">

                            <label class="flex flex-col flex-1">
                                <p class="text-white text-sm font-medium pb-2">Yeni Şifre</p>
                                <div class="relative group">
                                    <span class="absolute left-4 top-1/2 -translate-y-1/2 text-[#9db9ab] group-focus-within:text-primary transition-colors">
                                        <span class="material-symbols-outlined text-[20px]">lock</span>
                                    </span>
                                    <input asp-for="NewPassword" type="password" id="newPass" class="flex w-full rounded-lg text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-[#3b5447] bg-card-dark focus:border-primary h-12 pl-11 pr-12 transition-all" placeholder="••••••••" />
                                    <button type="button" onclick="togglePass('newPass')" class="absolute right-4 top-1/2 -translate-y-1/2 text-[#9db9ab] hover:text-white transition-colors">
                                        <span class="material-symbols-outlined text-[20px]">visibility</span>
                                    </button>
                                </div>
                                <span asp-validation-for="NewPassword" class="text-red-400 text-xs mt-1"></span>
                            </label>

                            <label class="flex flex-col flex-1">
                                <p class="text-white text-sm font-medium pb-2">Şifreyi Tekrar Girin</p>
                                <div class="relative group">
                                    <span class="absolute left-4 top-1/2 -translate-y-1/2 text-[#9db9ab] group-focus-within:text-primary transition-colors">
                                        <span class="material-symbols-outlined text-[20px]">lock_reset</span>
                                    </span>
                                    <input asp-for="ConfirmPassword" type="password" id="confirmPass" class="flex w-full rounded-lg text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-[#3b5447] bg-card-dark focus:border-primary h-12 pl-11 pr-12 transition-all" placeholder="••••••••" />
                                    <button type="button" onclick="togglePass('confirmPass')" class="absolute right-4 top-1/2 -translate-y-1/2 text-[#9db9ab] hover:text-white transition-colors">
                                        <span class="material-symbols-outlined text-[20px]">visibility</span>
                                    </button>
                                </div>
                                <span asp-validation-for="ConfirmPassword" class="text-red-400 text-xs mt-1"></span>
                            </label>

                            <div class="pt-2 mt-auto">
                                <button type="submit" class="flex w-full md:w-auto items-center justify-center rounded-lg h-12 px-6 border border-[#3b5447] hover:border-primary hover:bg-[#1c2721] hover:text-primary transition-all text-white text-base font-bold">
                                    <span class="material-symbols-outlined mr-2 text-[20px]">key</span>
                                    Şifreyi Güncelle
                                </button>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        function togglePass(id) {
            var input = document.getElementById(id);
            var icon = input.nextElementSibling.querySelector('span');

            if (input.type === "password") {
                input.type = "text";
                icon.innerText = "visibility_off";
            } else {
                input.type = "password";
                icon.innerText = "visibility";
            }
        }
    </script>
</body>
</html>